"use strict";(()=>{var e={};e.id=5192,e.ids=[5192],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},2782:(e,r,s)=>{s.r(r),s.d(r,{config:()=>u,default:()=>i,routeModule:()=>d});var a={};s.r(a),s.d(a,{default:()=>handler});var t=s(1802),n=s(7153),o=s(6249);async function handler(e,r){if("POST"!==e.method)return r.status(405).json({error:"M\xe9thode non autoris\xe9e"});let s=e.headers.authorization===`Bearer ${process.env.ADMIN_SECRET}`;if(!s)return r.status(403).json({error:"Acc\xe8s refus\xe9"});let{sql:a}=e.body;if(!a||"string"!=typeof a)return r.status(400).json({error:"Requ\xeate SQL invalide"});let t=await fetch(`${process.env.SUPABASE_URL}/rest/v1/rpc/execute_sql`,{method:"POST",headers:{apikey:process.env.SUPABASE_SERVICE_ROLE_KEY,Authorization:`Bearer ${process.env.SUPABASE_SERVICE_ROLE_KEY}`,"Content-Type":"application/json"},body:JSON.stringify({sql:a})}),n=await t.json();return t.ok?r.status(200).json({success:!0,result:n}):r.status(t.status).json({error:n.message||"Erreur Supabase"})}let i=(0,o.l)(a,"default"),u=(0,o.l)(a,"config"),d=new t.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/admin/supabase-action",pathname:"/api/admin/supabase-action",bundlePath:"",filename:""},userland:a})}};var r=require("../../../webpack-api-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),s=r.X(0,[4222],()=>__webpack_exec__(2782));module.exports=s})();