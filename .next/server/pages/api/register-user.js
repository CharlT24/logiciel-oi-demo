"use strict";(()=>{var e={};e.id=2537,e.ids=[2537],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},4228:(e,r,a)=>{a.r(r),a.d(r,{config:()=>o,default:()=>l,routeModule:()=>d});var t={};a.r(t),a.d(t,{default:()=>handler});var s=a(1802),i=a(7153),u=a(6249);let n=require("@supabase/auth-helpers-nextjs");async function handler(e,r){let a=(0,n.createServerSupabaseClient)({req:e,res:r}),{data:{user:t},error:s}=await a.auth.getUser();if(s||!t)return r.status(401).json({error:"Non authentifi\xe9 (via token)"});let{nom:i,telephone:u}=e.body,{error:l}=await a.from("utilisateurs").insert([{id:t.id,email:t.email,nom:i,telephone:u,role:"agent"}]);if(l)return r.status(500).json({error:l.message});r.status(200).json({message:"Utilisateur ins\xe9r\xe9 âœ…"})}let l=(0,u.l)(t,"default"),o=(0,u.l)(t,"config"),d=new s.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/register-user",pathname:"/api/register-user",bundlePath:"",filename:""},userland:t})}};var r=require("../../webpack-api-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),a=r.X(0,[4222],()=>__webpack_exec__(4228));module.exports=a})();