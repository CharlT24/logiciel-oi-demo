(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3759],{5804:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/immopro/modifier/[id]",function(){return n(9331)}])},9331:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return ModifierBienPro}});var t=n(5893),s=n(1163),l=n(7294),i=n(9846);function ModifierBienPro(){let e=(0,s.useRouter)(),{id:a}=e.query,[n,c]=(0,l.useState)(!0),[r,o]=(0,l.useState)({}),[d,u]=(0,l.useState)(""),handleChange=e=>{let{name:a,value:n}=e.target;o(e=>({...e,[a]:n}))},handleSubmit=async n=>{n.preventDefault();let{error:t}=await i.O.from("immo_pro").update({...r,type:d,updated_at:new Date().toISOString()}).eq("id",a);t?(alert("Erreur lors de la mise \xe0 jour du bien"),console.error(t)):(alert("Bien mis \xe0 jour avec succ\xe8s"),e.push("/immopro"))};return((0,l.useEffect)(()=>{let fetchBien=async()=>{if(!a)return;let{data:e,error:n}=await i.O.from("immo_pro").select("*").eq("id",a).single();if(n||!e){alert("Bien introuvable");return}o(e),u(e.type||""),c(!1)};fetchBien()},[a]),n)?(0,t.jsx)("p",{className:"text-center mt-10",children:"Chargement..."}):(0,t.jsxs)("div",{className:"max-w-5xl mx-auto py-10 px-4 space-y-8",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-orange-600",children:"✏️ Modifier le bien pro"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"font-semibold",children:"Type de bien"}),(0,t.jsxs)("label",{className:"block",children:[(0,t.jsx)("input",{type:"radio",name:"type",value:"fonds_de_commerce",checked:"fonds_de_commerce"===d,onChange:e=>u(e.target.value),className:"mr-2"}),"Fonds de commerce"]}),(0,t.jsxs)("label",{className:"block",children:[(0,t.jsx)("input",{type:"radio",name:"type",value:"locaux_commerciaux",checked:"locaux_commerciaux"===d,onChange:e=>u(e.target.value),className:"mr-2"}),"Locaux commerciaux"]})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsx)("input",{type:"text",name:"surface",placeholder:"Surface en m\xb2",value:r.surface||"",onChange:handleChange,className:"input"}),(0,t.jsx)("input",{type:"number",name:"prix",placeholder:"Prix HT ou net vendeur",value:r.prix||"",onChange:handleChange,className:"input"}),(0,t.jsx)("input",{type:"text",name:"ville",placeholder:"Ville",value:r.ville||"",onChange:handleChange,className:"input"}),(0,t.jsx)("input",{type:"text",name:"adresse",placeholder:"Adresse exacte",value:r.adresse||"",onChange:handleChange,className:"input"}),(0,t.jsx)("input",{type:"text",name:"disponibilite",placeholder:"Disponibilit\xe9",value:r.disponibilite||"",onChange:handleChange,className:"input"}),(0,t.jsx)("input",{type:"text",name:"destination",placeholder:"Destination",value:r.destination||"",onChange:handleChange,className:"input"}),(0,t.jsx)("input",{type:"text",name:"etat",placeholder:"\xc9tat",value:r.etat||"",onChange:handleChange,className:"input"}),(0,t.jsx)("input",{type:"text",name:"accessibilite",placeholder:"Accessibilit\xe9",value:r.accessibilite||"",onChange:handleChange,className:"input"})]}),"fonds_de_commerce"===d&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-orange-500",children:"Informations Fonds de commerce"}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsx)("input",{type:"text",name:"activite",placeholder:"Activit\xe9",value:r.activite||"",onChange:handleChange,className:"input"}),(0,t.jsx)("input",{type:"text",name:"chiffre_affaires",placeholder:"CA annuel",value:r.chiffre_affaires||"",onChange:handleChange,className:"input"}),(0,t.jsx)("input",{type:"text",name:"ebe",placeholder:"EBE",value:r.ebe||"",onChange:handleChange,className:"input"}),(0,t.jsx)("input",{type:"text",name:"bail",placeholder:"Type de bail",value:r.bail||"",onChange:handleChange,className:"input"}),(0,t.jsx)("input",{type:"text",name:"loyer",placeholder:"Loyer mensuel",value:r.loyer||"",onChange:handleChange,className:"input"}),(0,t.jsx)("input",{type:"text",name:"charges",placeholder:"Charges annuelles",value:r.charges||"",onChange:handleChange,className:"input"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-orange-500",children:"Description"}),(0,t.jsx)("textarea",{name:"description",rows:"5",placeholder:"Description du bien",value:r.description||"",onChange:handleChange,className:"border rounded p-2 w-full"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-orange-500",children:"\uD83D\uDCF8 Photos actuelles"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"border rounded overflow-hidden",children:[(0,t.jsx)("img",{src:"/photos/covers/".concat(a,"/cover.jpg"),alt:"Cover",className:"w-full h-full object-cover"}),(0,t.jsx)("p",{className:"text-xs text-center",children:"Photo principale"})]}),[1,2,3,4].map(e=>(0,t.jsxs)("div",{className:"border rounded overflow-hidden",children:[(0,t.jsx)("img",{src:"/photos/gallery/".concat(a,"/").concat(e,".jpeg"),alt:"Photo ".concat(e),className:"w-full h-full object-cover"}),(0,t.jsxs)("p",{className:"text-xs text-center",children:["Photo ",e]})]},e))]}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Remplace les fichiers en FTP ou ajoute une interface de gestion ult\xe9rieurement."})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-orange-500",children:"\uD83D\uDC68‍\uD83D\uDCBC Propri\xe9taire / Soci\xe9t\xe9"}),(0,t.jsx)("input",{type:"text",name:"nom_structure",placeholder:"Nom structure",value:r.nom_structure||"",onChange:handleChange,className:"input"}),(0,t.jsx)("input",{type:"text",name:"numero_mandat",placeholder:"N\xb0 mandat",value:r.numero_mandat||"",onChange:handleChange,className:"input"}),(0,t.jsx)("input",{type:"date",name:"date_mandat",placeholder:"Date mandat",value:r.date_mandat||"",onChange:handleChange,className:"input"})]}),(0,t.jsxs)("div",{className:"flex justify-between mt-6",children:[(0,t.jsx)("button",{onClick:()=>e.back(),className:"text-gray-600 hover:underline",children:"⬅️ Retour"}),(0,t.jsx)("button",{type:"submit",onClick:handleSubmit,className:"bg-orange-600 text-white px-6 py-2 rounded hover:bg-orange-700",children:"\uD83D\uDCBE Enregistrer les modifications"})]})]})}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=5804)}),_N_E=e.O()}]);