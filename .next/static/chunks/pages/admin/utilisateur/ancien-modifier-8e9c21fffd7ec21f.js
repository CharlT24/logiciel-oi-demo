(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1051],{6399:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/utilisateur/ancien-modifier",function(){return a(4530)}])},4530:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return ModifierUtilisateur}});var l=a(5893),r=a(1163),t=a(7294),i=a(9846);function ModifierUtilisateur(){let e=(0,r.useRouter)(),{id:n}=e.query,[a,s]=(0,t.useState)(null),[u,o]=(0,t.useState)(!0),[d,c]=(0,t.useState)(!1);(0,t.useEffect)(()=>{n&&fetchUser()},[n]);let fetchUser=async()=>{let{data:e,error:a}=await i.O.from("utilisateurs").select("*").eq("id",n).single();a?console.error("Erreur chargement utilisateur",a):s(e),o(!1)},handleChange=e=>{s({...a,[e.target.name]:e.target.value})},handleSubmit=async l=>{l.preventDefault();let{error:r}=await i.O.from("utilisateurs").update({nom:a.nom,prenom:a.prenom,email:a.email,role:a.role,ville:a.ville,agence:a.agence}).eq("id",n);r?alert("Erreur lors de la mise \xe0 jour"):(c(!0),setTimeout(()=>e.push("/admin/utilisateur"),1e3))};return u?(0,l.jsx)("p",{className:"p-6",children:"Chargement..."}):a?(0,l.jsxs)("div",{className:"max-w-xl mx-auto p-6 bg-white shadow rounded space-y-6",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-orange-600",children:"✏️ Modifier un utilisateur"}),(0,l.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-4",children:[(0,l.jsx)("input",{name:"nom",value:a.nom||"",onChange:handleChange,className:"w-full border p-2 rounded",placeholder:"Nom"}),(0,l.jsx)("input",{name:"prenom",value:a.prenom||"",onChange:handleChange,className:"w-full border p-2 rounded",placeholder:"Pr\xe9nom"}),(0,l.jsx)("input",{name:"email",value:a.email||"",onChange:handleChange,className:"w-full border p-2 rounded",placeholder:"Email"}),(0,l.jsx)("input",{name:"ville",value:a.ville||"",onChange:handleChange,className:"w-full border p-2 rounded",placeholder:"Ville"}),(0,l.jsx)("input",{name:"agence",value:a.agence||"",onChange:handleChange,className:"w-full border p-2 rounded",placeholder:"Agence"}),(0,l.jsxs)("select",{name:"role",value:a.role||"",onChange:handleChange,className:"w-full border p-2 rounded",children:[(0,l.jsx)("option",{value:"agent",children:"Agent"}),(0,l.jsx)("option",{value:"admin",children:"Admin"})]}),(0,l.jsx)("button",{type:"submit",className:"bg-orange-500 text-white py-2 px-4 rounded hover:bg-orange-600",children:"\uD83D\uDCBE Enregistrer"})]}),d&&(0,l.jsx)("p",{className:"text-green-600",children:"✅ Modifications enregistr\xe9es !"})]}):(0,l.jsx)("p",{className:"p-6 text-red-500",children:"Utilisateur introuvable."})}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=6399)}),_N_E=e.O()}]);