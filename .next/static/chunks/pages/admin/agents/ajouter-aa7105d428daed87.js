(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1124],{2081:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/agents/ajouter",function(){return a(568)}])},568:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return AjouterAgent}});var n=a(5893),l=a(7294),s=a(9846),r=a(1163);function AjouterAgent(){let[e,t]=(0,l.useState)({email:"",nom:"",ville:"",role:"agent",actif:!0}),[a,i]=(0,l.useState)(!1),o=(0,r.useRouter)(),handleChange=e=>{let{name:a,value:n,type:l,checked:s}=e.target;t(e=>({...e,[a]:"checkbox"===l?s:n}))},handleSubmit=async t=>{t.preventDefault(),i(!0);let{data:a,error:n}=await s.O.from("utilisateurs").insert([e]).select().single();i(!1),n?(console.error("Erreur :",n),alert("❌ Erreur lors de la cr\xe9ation de l’agent.")):(await fetch("http://localhost/wordpress/wp-json/oi/v1/create-agent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:a.id,nom:a.nom,ville:a.ville,telephone:a.telephone,email:a.email_contact,photo_url:a.photo_url})}),alert("✅ Agent ajout\xe9 avec succ\xe8s !"),o.push("/admin/utilisateurs"))};return(0,n.jsxs)("div",{className:"p-8 max-w-2xl mx-auto space-y-8",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-orange-600",children:"➕ Ajouter un agent"}),(0,n.jsxs)("form",{onSubmit:handleSubmit,className:"bg-white shadow rounded-xl p-6 space-y-4 border",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nom"}),(0,n.jsx)("input",{type:"text",name:"nom",value:e.nom,onChange:handleChange,required:!0,className:"mt-1 block w-full border rounded-md p-2"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,n.jsx)("input",{type:"email",name:"email",value:e.email,onChange:handleChange,required:!0,className:"mt-1 block w-full border rounded-md p-2"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Ville"}),(0,n.jsx)("input",{type:"text",name:"ville",value:e.ville,onChange:handleChange,className:"mt-1 block w-full border rounded-md p-2"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"R\xf4le"}),(0,n.jsxs)("select",{name:"role",value:e.role,onChange:handleChange,className:"mt-1 block w-full border rounded-md p-2",children:[(0,n.jsx)("option",{value:"agent",children:"Agent"}),(0,n.jsx)("option",{value:"admin",children:"Admin"})]})]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("input",{type:"checkbox",name:"actif",checked:e.actif,onChange:handleChange,className:"rounded"}),(0,n.jsx)("label",{className:"text-sm text-gray-700",children:"Actif"})]}),(0,n.jsx)("button",{type:"submit",disabled:a,className:"bg-orange-600 text-white px-4 py-2 rounded hover:bg-orange-700 transition",children:a?"En cours...":"Cr\xe9er l’agent"})]})]})}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=2081)}),_N_E=e.O()}]);