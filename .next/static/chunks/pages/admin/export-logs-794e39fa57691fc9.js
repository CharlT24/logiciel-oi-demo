(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7548],{9789:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/export-logs",function(){return s(207)}])},207:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return ExportLogs}});var a=s(5893),l=s(7294);function ExportLogs(){let[e,t]=(0,l.useState)([]),[s,r]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{let fetchLogs=async()=>{let e=await fetch("/api/export/logs"),s=await e.json();t(s.logs||[]),r(!1)};fetchLogs()},[]),(0,a.jsxs)("div",{className:"max-w-5xl mx-auto py-10 space-y-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-orange-600",children:"\uD83D\uDCDC Historique des exports"}),s?(0,a.jsx)("p",{children:"Chargement..."}):0===e.length?(0,a.jsx)("p",{className:"text-gray-500",children:"Aucun export enregistr\xe9 pour le moment."}):(0,a.jsxs)("table",{className:"w-full text-sm border mt-4",children:[(0,a.jsx)("thead",{className:"bg-gray-100",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left px-4 py-2",children:"Portail"}),(0,a.jsx)("th",{className:"text-left px-4 py-2",children:"Date"}),(0,a.jsx)("th",{className:"text-left px-4 py-2",children:"Nombre de biens"}),(0,a.jsx)("th",{className:"text-left px-4 py-2",children:"Utilisateur"})]})}),(0,a.jsx)("tbody",{children:e.map((e,t)=>(0,a.jsxs)("tr",{className:"border-t",children:[(0,a.jsx)("td",{className:"px-4 py-2 font-medium text-orange-600",children:e.portail}),(0,a.jsx)("td",{className:"px-4 py-2",children:new Date(e.created_at).toLocaleString()}),(0,a.jsx)("td",{className:"px-4 py-2",children:e.nb_biens}),(0,a.jsx)("td",{className:"px-4 py-2",children:e.user_email||"-"})]},t))})]}),status&&(0,a.jsx)("p",{className:"text-green-700 font-medium mt-4",children:status}),(0,a.jsxs)("div",{className:"mt-10",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"\uD83D\uDD52 Derniers exports enregistr\xe9s"}),(0,a.jsx)(ExportLogTable,{})]})]})}function ExportLogTable(){let[e,t]=(0,l.useState)([]),[s,r]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{fetch("/api/export/logs").then(e=>e.json()).then(e=>{t(e.logs||[]),r(!1)})},[]),s)?(0,a.jsx)("p",{children:"Chargement..."}):e.length?(0,a.jsx)("div",{className:"border rounded bg-gray-50",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-100",children:[(0,a.jsx)("th",{className:"px-3 py-2 text-left",children:"Portail"}),(0,a.jsx)("th",{className:"px-3 py-2 text-left",children:"Date"}),(0,a.jsx)("th",{className:"px-3 py-2 text-left",children:"Biens"}),(0,a.jsx)("th",{className:"px-3 py-2 text-left",children:"Utilisateur"})]})}),(0,a.jsx)("tbody",{children:e.map((e,t)=>(0,a.jsxs)("tr",{className:"border-t",children:[(0,a.jsx)("td",{className:"px-3 py-2 font-semibold text-orange-600",children:e.portail}),(0,a.jsx)("td",{className:"px-3 py-2",children:new Date(e.created_at).toLocaleString()}),(0,a.jsx)("td",{className:"px-3 py-2",children:e.nb_biens}),(0,a.jsx)("td",{className:"px-3 py-2",children:e.user_email||"-"})]},t))})]})}):(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Aucun export enregistr\xe9 pour le moment."})}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=9789)}),_N_E=e.O()}]);