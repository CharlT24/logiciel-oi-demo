(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5953],{2747:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/pdf",function(){return n(9249)}])},9249:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return AdminPDFUpload}});var a=n(5893),r=n(7294),l=n(9846);function AdminPDFUpload(){let[e,t]=(0,r.useState)(null),[n,u]=(0,r.useState)(!1),[o,s]=(0,r.useState)(null),handleUpload=async()=>{if(!e)return;u(!0),s(null);let t="newsletters/".concat(Date.now(),"-").concat(e.name),{error:n}=await l.O.storage.from("documents").upload(t,e,{upsert:!0,contentType:e.type});if(n){s("❌ Erreur lors de l'upload"),u(!1);return}let{data:a}=l.O.storage.from("documents").getPublicUrl(t),{error:r}=await l.O.from("newsletters").insert({url:a.publicUrl});r?s("❌ Erreur en base de donn\xe9es"):s("✅ PDF upload\xe9 et publi\xe9 avec succ\xe8s !"),u(!1)};return(0,a.jsxs)("div",{className:"max-w-xl mx-auto bg-white p-8 rounded-xl shadow mt-10 space-y-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-orange-600",children:"\uD83D\uDCF0 Uploader une Newsletter"}),(0,a.jsx)("input",{type:"file",accept:"application/pdf",onChange:e=>t(e.target.files[0]),className:"border p-2 rounded w-full"}),(0,a.jsx)("button",{onClick:handleUpload,disabled:n||!e,className:"bg-orange-600 text-white px-6 py-2 rounded hover:bg-orange-700 disabled:opacity-50",children:n?"⏳ Upload...":"\uD83D\uDE80 Publier la Newsletter"}),o&&(0,a.jsx)("p",{className:"text-center text-sm font-medium",children:o})]})}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=2747)}),_N_E=e.O()}]);