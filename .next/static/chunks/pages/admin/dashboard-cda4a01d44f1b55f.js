(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9189],{2833:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/dashboard",function(){return t(1825)}])},1825:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return AdminDashboard}});var i=t(5893),n=t(7294),r=t(1163),a=t(9846);function AdminDashboard(){let e=(0,r.useRouter)(),[s,t]=(0,n.useState)(null),[l,d]=(0,n.useState)(!1),[u,o]=(0,n.useState)({utilisateurs:0,biens:0,clients:0});return((0,n.useEffect)(()=>{let checkAdmin=async()=>{var s,i;let n=await a.O.auth.getSession(),r=null===(i=n.data)||void 0===i?void 0:null===(s=i.session)||void 0===s?void 0:s.user;if(!r)return e.push("/login");t(r);let{data:l,error:u}=await a.O.from("utilisateurs").select("role").eq("id",r.id).single();if(u||(null==l?void 0:l.role)!=="admin")return e.push("/dashboard");d(!0),fetchStats()},fetchStats=async()=>{let[{count:e},{count:s},{count:t}]=await Promise.all([a.O.from("utilisateurs").select("*",{count:"exact",head:!0}),a.O.from("biens").select("*",{count:"exact",head:!0}),a.O.from("clients").select("*",{count:"exact",head:!0})]);o({utilisateurs:e,biens:s,clients:t})};checkAdmin()},[]),l)?(0,i.jsxs)("div",{className:"space-y-10",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-orange-700",children:"\uD83D\uDC51 Tableau de bord Administrateur"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,i.jsx)(Card,{icon:"\uD83D\uDC65",label:"Utilisateurs",value:u.utilisateurs}),(0,i.jsx)(Card,{icon:"\uD83C\uDFE1",label:"Biens en base",value:u.biens}),(0,i.jsx)(Card,{icon:"\uD83D\uDDC2️",label:"Clients enregistr\xe9s",value:u.clients})]}),(0,i.jsxs)("div",{className:"bg-white rounded-xl shadow p-6 space-y-4 border border-gray-100",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold text-gray-700 mb-4",children:"⚙️ Actions rapides"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[(0,i.jsx)(AdminLink,{href:"/admin/utilisateurs",text:"\uD83D\uDC65 G\xe9rer les utilisateurs"}),(0,i.jsx)(AdminLink,{href:"/admin/utilisateurs/ajouter",text:"➕ Cr\xe9er un nouvel agent"}),(0,i.jsx)(AdminLink,{href:"/biens",text:"\uD83D\uDCE6 Liste des biens"}),(0,i.jsx)(AdminLink,{href:"/clients",text:"\uD83D\uDC64 Liste des clients"}),(0,i.jsx)(AdminLink,{href:"/reseau",text:"\uD83C\uDF10 Voir le r\xe9seau"}),(0,i.jsx)(AdminLink,{href:"/statistiques",text:"\uD83D\uDCCA Statistiques globales"})]})]})]}):null}function Card(e){let{icon:s,label:t,value:n}=e;return(0,i.jsxs)("div",{className:"bg-orange-50 border border-orange-100 rounded-xl p-5 flex items-center gap-4 shadow",children:[(0,i.jsx)("div",{className:"text-3xl text-orange-600",children:s}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-gray-600",children:t}),(0,i.jsx)("p",{className:"text-xl font-bold text-gray-800",children:n})]})]})}function AdminLink(e){let{href:s,text:t}=e;return(0,i.jsx)("a",{href:s,className:"block text-sm px-4 py-2 rounded-md border border-orange-200 text-orange-700 bg-orange-50 hover:bg-orange-100 transition",children:t})}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=2833)}),_N_E=e.O()}]);