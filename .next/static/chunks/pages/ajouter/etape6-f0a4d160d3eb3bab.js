(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[141],{3810:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ajouter/etape6",function(){return n(3598)}])},3598:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Etape6}});var a=n(5893),r=n(7294),s=n(1163);function Etape6(){let e=(0,s.useRouter)(),[t,n]=(0,r.useState)({numero:"",date_debut:"",date_fin:"",statut:"provisoire"}),[d,o]=(0,r.useState)(!1),genererNumeroMandat=async()=>{let t=e.query.id;if(!t){alert("ID du bien introuvable");return}try{let e=await fetch("/api/mandats/generer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bien_id:t,agent_id:null,bien_info:{},proprietaire_info:{}})}),a=await e.json();if(!e.ok)throw Error(a.message||"Erreur serveur");n(e=>({...e,numero:a.numero_mandat})),alert("✅ Num\xe9ro de mandat g\xe9n\xe9r\xe9: ".concat(a.numero_mandat))}catch(e){console.error("Erreur g\xe9n\xe9ration mandat:",e),alert("Erreur lors de la g\xe9n\xe9ration du mandat")}},finaliserMandat=async()=>{alert("✅ Mandat finalis\xe9"),e.push("/biens")};return(0,a.jsxs)("div",{className:"max-w-5xl mx-auto p-6 space-y-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-orange-600",children:"\uD83D\uDCC4 \xc9tape 6: Cr\xe9ation du Mandat"}),t.numero&&(0,a.jsx)("div",{className:"bg-green-100 p-4 rounded-md",children:(0,a.jsxs)("p",{children:["✅ Num\xe9ro mandat: ",(0,a.jsx)("strong",{children:t.numero})]})}),(0,a.jsxs)("div",{className:"border rounded-lg p-4 space-y-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-orange-500",children:"D\xe9tails Mandat"}),(0,a.jsx)(Input,{label:"Date d\xe9but",type:"date",value:t.date_debut,onChange:e=>n(t=>({...t,date_debut:e}))}),(0,a.jsx)(Input,{label:"Date fin",type:"date",value:t.date_fin,onChange:e=>n(t=>({...t,date_fin:e}))}),(0,a.jsx)(Input,{label:"Statut",value:t.statut,onChange:e=>n(t=>({...t,statut:e}))})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,a.jsx)("button",{onClick:genererNumeroMandat,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold",disabled:d,children:"➕ G\xe9n\xe9rer num\xe9ro de mandat"}),(0,a.jsx)("button",{onClick:finaliserMandat,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-semibold",disabled:!t.numero,children:"✅ Finaliser et enregistrer"})]})]})}function Input(e){let{label:t,value:n,onChange:r,type:s="text"}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),(0,a.jsx)("input",{type:s,value:n,onChange:e=>r(e.target.value),className:"w-full border rounded px-3 py-2 shadow-sm focus:ring-orange-500 focus:border-orange-500"})]})}n(9846)}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=3810)}),_N_E=e.O()}]);