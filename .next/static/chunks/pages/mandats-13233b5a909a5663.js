(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4142],{9520:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/mandats",function(){return a(7867)}])},7867:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return MandatsPage}});var r=a(5893),t=a(7294),i=a(1163);function MandatsPage(){(0,i.useRouter)();let[e,n]=(0,t.useState)({ville:"",code_postal:"",type_bien:"",proprietaire_nom:"",proprietaire_prenom:"",adresse_proprietaire:"",adresse_bien:"",date_debut:"",date_fin:""}),[a,d]=(0,t.useState)(null),[o,s]=(0,t.useState)(!1),handleChange=(e,a)=>{n(n=>({...n,[e]:a}))},genererMandat=async()=>{s(!0);try{let n=await fetch("/api/mandats/generer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bien_id:"00000000-0000-0000-0000-000000000000",agent_id:null,bien_info:{ville:e.ville||"Non pr\xe9cis\xe9",code_postal:e.code_postal||"00000",type_bien:e.type_bien||"Non pr\xe9cis\xe9",adresse_bien:e.adresse_bien||"Non pr\xe9cis\xe9"},proprietaire_info:{nom:e.proprietaire_nom||"Non pr\xe9cis\xe9",prenom:e.proprietaire_prenom||"Non pr\xe9cis\xe9",adresse_principale:e.adresse_proprietaire||"Non pr\xe9cis\xe9"},date_debut:e.date_debut,date_fin:e.date_fin})}),a=await n.json();if(!n.ok)throw Error(a.message||"Erreur serveur");d(a.numero_mandat),alert("✅ Num\xe9ro de mandat g\xe9n\xe9r\xe9: ".concat(a.numero_mandat))}catch(e){console.error("Erreur g\xe9n\xe9ration mandat:",e),alert("Erreur lors de la g\xe9n\xe9ration du mandat")}finally{s(!1)}};return(0,r.jsxs)("div",{className:"max-w-4xl mx-auto p-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-orange-600 mb-6",children:"\uD83E\uDDFE G\xe9n\xe9rer un Mandat"}),a&&(0,r.jsx)("div",{className:"bg-green-100 p-4 rounded mb-6",children:(0,r.jsxs)("p",{children:["✅ Num\xe9ro de mandat g\xe9n\xe9r\xe9: ",(0,r.jsx)("strong",{children:a})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsx)(Input,{label:"Ville",value:e.ville,onChange:e=>handleChange("ville",e)}),(0,r.jsx)(Input,{label:"Code Postal",value:e.code_postal,onChange:e=>handleChange("code_postal",e)}),(0,r.jsx)(Input,{label:"Type de Bien",value:e.type_bien,onChange:e=>handleChange("type_bien",e)}),(0,r.jsx)(Input,{label:"Nom du Propri\xe9taire",value:e.proprietaire_nom,onChange:e=>handleChange("proprietaire_nom",e)}),(0,r.jsx)(Input,{label:"Pr\xe9nom du Propri\xe9taire",value:e.proprietaire_prenom,onChange:e=>handleChange("proprietaire_prenom",e)}),(0,r.jsx)(Input,{label:"Adresse du Propri\xe9taire",value:e.adresse_proprietaire,onChange:e=>handleChange("adresse_proprietaire",e)}),(0,r.jsx)(Input,{label:"Adresse du Bien (si diff\xe9rente)",value:e.adresse_bien,onChange:e=>handleChange("adresse_bien",e)}),(0,r.jsx)(Input,{label:"\uD83D\uDCC5 Date de d\xe9but",type:"date",value:e.date_debut,onChange:e=>handleChange("date_debut",e)}),(0,r.jsx)(Input,{label:"\uD83D\uDCC5 Date de fin",type:"date",value:e.date_fin,onChange:e=>handleChange("date_fin",e)})]}),(0,r.jsx)("div",{className:"flex justify-end mt-8",children:(0,r.jsx)("button",{onClick:genererMandat,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold",disabled:o,children:"➕ G\xe9n\xe9rer un mandat"})})]})}function Input(e){let{label:n,value:a,onChange:t,type:i="text"}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),(0,r.jsx)("input",{type:i,value:a,onChange:e=>t(e.target.value),className:"w-full border rounded px-3 py-2 shadow-sm focus:ring-orange-500 focus:border-orange-500"})]})}a(9846)}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=9520)}),_N_E=e.O()}]);