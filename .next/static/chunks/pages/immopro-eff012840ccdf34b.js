(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3742],{885:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/immopro",function(){return r(9496)}])},9496:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ImmoProIndex}});var s=r(5893),a=r(7294),i=r(1664),n=r.n(i),o=r(9846),l=r(1163);function ImmoProIndex(){let[e,t]=(0,a.useState)([]),[r,i]=(0,a.useState)(null),[c,u]=(0,a.useState)(!1),d=(0,l.useRouter)();(0,a.useEffect)(()=>{document.title="Biens Immo Pro";let fetchData=async()=>{var e,r;let{data:s}=await o.O.auth.getSession(),a=null==s?void 0:null===(r=s.session)||void 0===r?void 0:null===(e=r.user)||void 0===e?void 0:e.id;if(i(a),a){let{data:e}=await o.O.from("utilisateurs").select("role").eq("id",a).single();(null==e?void 0:e.role)==="admin"&&u(!0)}let{data:n,error:l}=await o.O.from("immo_pro").select("*").order("created_at",{ascending:!1});l&&console.error("Erreur chargement immo_pro:",l),t(n||[])};fetchData()},[]);let handleDelete=async e=>{if(!confirm("Supprimer ce bien ?"))return;let{error:r}=await o.O.from("immo_pro").delete().eq("id",e);if(r)return alert("Erreur suppression");t(t=>t.filter(t=>t.id!==e))};return(0,s.jsxs)("div",{className:"max-w-6xl mx-auto px-6 py-10 space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-orange-600",children:"\uD83C\uDFE2 Biens Immo Pro"}),(0,s.jsx)(n(),{href:"/immopro/ajouter/etape1",children:(0,s.jsx)("button",{className:"bg-orange-600 text-white px-4 py-2 rounded hover:bg-orange-700 text-sm",children:"➕ Ajouter un bien pro"})})]}),0===e.length?(0,s.jsx)("p",{className:"text-gray-500",children:"Aucun bien pro enregistr\xe9 pour l'instant."}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:e.map(e=>(0,s.jsxs)("div",{className:"bg-white p-4 rounded-xl shadow space-y-2 border relative",children:[(0,s.jsx)("h2",{className:"font-semibold text-lg text-gray-800",children:"fonds_de_commerce"===e.type?"Fonds de commerce":"Locaux commerciaux"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["\uD83D\uDCCD ",e.ville]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["\uD83D\uDCD0 ",e.surface," m\xb2"]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["\uD83D\uDCB0 ",e.prix," € HT"]}),(0,s.jsxs)("p",{className:"text-sm text-gray-400 text-xs",children:["\uD83D\uDD52 Ajout\xe9 le ",new Date(e.created_at).toLocaleDateString()]}),(0,s.jsxs)("div",{className:"absolute top-3 right-3 flex gap-2",children:[(c||r===e.created_by)&&(0,s.jsx)("button",{onClick:()=>d.push("/immopro/modifier/".concat(e.id)),className:"text-blue-600 hover:text-blue-800 text-sm",children:"\uD83D\uDCDD"}),c&&(0,s.jsx)("button",{onClick:()=>handleDelete(e.id),className:"text-red-600 hover:text-red-800 text-sm",children:"\uD83D\uDDD1"})]})]},e.id))})]})}}},function(e){e.O(0,[1664,9774,2888,179],function(){return e(e.s=885)}),_N_E=e.O()}]);