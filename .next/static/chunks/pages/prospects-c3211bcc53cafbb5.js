(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4981],{29:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/prospects",function(){return s(149)}])},149:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return Prospects}});var t=s(5893),c=s(7294),a=s(9846);function Prospects(){let[e,r]=(0,c.useState)([]),[s,l]=(0,c.useState)(!0);(0,c.useEffect)(()=>{fetchProspects()},[]);let fetchProspects=async()=>{let{data:e,error:s}=await a.O.from("prospects").select("*").order("created_at",{ascending:!1});s?console.error("Erreur chargement prospects :",s.message):r(e),l(!1)},handleDelete=async e=>{let s=window.confirm("Supprimer ce prospect ?");if(!s)return;let{error:t}=await a.O.from("prospects").delete().eq("id",e);t?alert("Erreur lors de la suppression"):r(r=>r.filter(r=>r.id!==e))};return s?(0,t.jsx)("p",{className:"text-center mt-10",children:"Chargement des prospects..."}):(0,t.jsxs)("div",{className:"max-w-5xl mx-auto py-10 px-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-orange-600 mb-6",children:"\uD83D\uDCEC Liste des prospects re\xe7us"}),0===e.length?(0,t.jsx)("p",{className:"text-gray-500",children:"Aucun prospect pour le moment."}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full bg-white border border-gray-200 rounded shadow-sm",children:[(0,t.jsx)("thead",{className:"bg-orange-100",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"py-2 px-4 border",children:"Nom"}),(0,t.jsx)("th",{className:"py-2 px-4 border",children:"Email"}),(0,t.jsx)("th",{className:"py-2 px-4 border",children:"T\xe9l\xe9phone"}),(0,t.jsx)("th",{className:"py-2 px-4 border",children:"Ville"}),(0,t.jsx)("th",{className:"py-2 px-4 border",children:"Type de bien"}),(0,t.jsx)("th",{className:"py-2 px-4 border",children:"Surface"}),(0,t.jsx)("th",{className:"py-2 px-4 border",children:"Date"}),(0,t.jsx)("th",{className:"py-2 px-4 border",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"py-2 px-4 border",children:e.nom}),(0,t.jsx)("td",{className:"py-2 px-4 border",children:e.email}),(0,t.jsx)("td",{className:"py-2 px-4 border",children:e.telephone}),(0,t.jsx)("td",{className:"py-2 px-4 border",children:e.ville}),(0,t.jsx)("td",{className:"py-2 px-4 border",children:e.type_bien}),(0,t.jsxs)("td",{className:"py-2 px-4 border",children:[e.surface_m2," m\xb2"]}),(0,t.jsx)("td",{className:"py-2 px-4 border",children:new Date(e.created_at).toLocaleDateString()}),(0,t.jsx)("td",{className:"py-2 px-4 border text-center",children:(0,t.jsx)("button",{onClick:()=>handleDelete(e.id),className:"bg-red-500 hover:bg-red-600 text-white text-xs px-3 py-1 rounded",children:"\uD83D\uDDD1Ô∏è Supprimer"})})]},e.id))})]})})]})}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=29)}),_N_E=e.O()}]);