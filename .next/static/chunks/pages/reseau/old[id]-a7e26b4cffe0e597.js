(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6071],{8152:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reseau/old[id]",function(){return t(4086)}])},4086:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return FicheAgent}});var l=t(5893),a=t(1163),n=t(7294),i=t(9846),r=t(5675),c=t.n(r),d=t(1664),x=t.n(d);function FicheAgent(){let e=(0,a.useRouter)(),{id:s}=e.query,[t,r]=(0,n.useState)(null),[d,o]=(0,n.useState)([]),[u,h]=(0,n.useState)([]);return((0,n.useEffect)(()=>{if(!s)return;let fetchData=async()=>{let{data:e}=await i.O.from("utilisateurs").select("*").eq("id",s).single();r(e);let{data:t}=await i.O.from("biens").select("*").eq("agent_id",s);h(t||[]);let{data:l}=await i.O.from("clients").select("*").eq("agent_id",s);o(l||[])};fetchData()},[s]),t)?(0,l.jsxs)("div",{className:"space-y-10 max-w-6xl mx-auto p-8",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-orange-600",children:"\uD83D\uDC64 Fiche Agent"}),(0,l.jsx)(x(),{href:"/reseau",className:"text-sm text-orange-600 hover:underline",children:"⬅️ Retour au r\xe9seau"})]}),(0,l.jsxs)("div",{className:"flex flex-col md:flex-row bg-white rounded-xl shadow-lg overflow-hidden",children:[(0,l.jsxs)("div",{className:"p-6 flex flex-col items-center justify-center bg-orange-50 md:w-1/3",children:[(0,l.jsx)(c(),{src:t.photo_url||"/avatar.png",alt:"Photo de l’agent",width:100,height:100,className:"rounded-full shadow"}),(0,l.jsx)("h2",{className:"text-lg font-bold mt-4",children:t.nom||"Nom inconnu"}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:t.email}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:t.telephone}),(0,l.jsxs)("p",{className:"text-sm text-gray-500",children:["\uD83D\uDCCD ",t.ville]})]}),(0,l.jsxs)("div",{className:"p-6 flex-1 space-y-3",children:[(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-semibold",children:"Entreprise :"})," ",t.entreprise||"N/A"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-semibold",children:"Secteur :"})," ",t.secteur||"Non sp\xe9cifi\xe9"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-semibold",children:"R\xf4le :"})," ",t.role]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-semibold",children:"Statut :"})," ",t.statut]}),(0,l.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:t.description})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow",children:[(0,l.jsxs)("h3",{className:"text-lg font-semibold text-orange-700 mb-2",children:["\uD83C\uDFE1 Biens (",u.length,")"]}),0===u.length?(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Aucun bien pour cet agent."}):(0,l.jsx)("ul",{className:"space-y-2 text-sm",children:u.map(e=>{var s;return(0,l.jsxs)("li",{children:["• ",e.titre," – ",e.ville," – ",null===(s=e.prix)||void 0===s?void 0:s.toLocaleString()," €"]},e.id)})})]}),(0,l.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow",children:[(0,l.jsxs)("h3",{className:"text-lg font-semibold text-orange-700 mb-2",children:["\uD83D\uDC65 Clients (",d.length,")"]}),0===d.length?(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Aucun client pour cet agent."}):(0,l.jsx)("ul",{className:"space-y-2 text-sm",children:d.map(e=>{var s;return(0,l.jsxs)("li",{children:["• ",e.nom," – ",e.ville_recherche," – ",null===(s=e.budget_max)||void 0===s?void 0:s.toLocaleString()," €"]},e.id)})})]})]})]}):(0,l.jsx)("p",{className:"text-gray-600 p-8",children:"Chargement de l’agent..."})}}},function(e){e.O(0,[1664,9774,2888,179],function(){return e(e.s=8152)}),_N_E=e.O()}]);