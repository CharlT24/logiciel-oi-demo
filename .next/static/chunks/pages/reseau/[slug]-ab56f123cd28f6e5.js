(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7134],{7949:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reseau/[slug]",function(){return t(8209)}])},8209:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return FicheAgent}});var l=t(5893),a=t(1163),n=t(7294),r=t(9846),i=t(1664),c=t.n(i),d=t(5675),u=t.n(d);function FicheAgent(){let e=(0,a.useRouter)(),{slug:s}=e.query,[t,i]=(0,n.useState)(null),[d,x]=(0,n.useState)([]),[h,o]=(0,n.useState)([]),[m,g]=(0,n.useState)(!0);return((0,n.useEffect)(()=>{if(!s)return;let fetchData=async()=>{g(!0);let{data:e,error:t}=await r.O.from("utilisateurs").select("*").eq("slug",s).single();if(t||!e){i(null),g(!1);return}i(e);let{data:l}=await r.O.from("clients").select("*").eq("agent_id",e.id),{data:a}=await r.O.from("biens").select("*").eq("agent_id",e.id);x(l||[]),o(a||[]),g(!1)};fetchData()},[s]),m)?(0,l.jsx)("p",{className:"text-gray-600 p-8",children:"Chargement de l’agent..."}):t?(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("h1",{className:"text-2xl font-bold text-orange-700",children:["\uD83D\uDC64 ",t.nom]}),(0,l.jsx)(c(),{href:"/reseau",className:"text-sm text-orange-600 hover:underline",children:"⬅️ Retour au r\xe9seau"})]}),(0,l.jsxs)("div",{className:"bg-white shadow-md rounded-xl p-6 flex gap-6 items-start",children:[(0,l.jsx)("div",{children:t.avatar_url?(0,l.jsx)(u(),{src:t.avatar_url,alt:"Avatar",width:100,height:100,className:"rounded-full border"}):(0,l.jsx)("div",{className:"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center text-gray-500",children:"\uD83D\uDC64"})}),(0,l.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-semibold",children:"\uD83D\uDCE7 Email :"})," ",t.email]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-semibold",children:"\uD83D\uDCCD Ville :"})," ",t.ville||"Non pr\xe9cis\xe9e"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-semibold",children:"\uD83D\uDCF1 T\xe9l\xe9phone :"})," ",t.telephone||"—"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-semibold",children:"\uD83C\uDFE2 Agence :"})," ",t.agence||"—"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:"font-semibold",children:"\uD83E\uDDD1‍\uD83D\uDCBC R\xf4le :"})," ",t.role||"agent"]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,l.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow border border-gray-100",children:[(0,l.jsxs)("h2",{className:"text-lg font-semibold text-gray-700 mb-4",children:["\uD83D\uDC65 Ses clients (",d.length,")"]}),0===d.length?(0,l.jsx)("p",{className:"text-gray-500 text-sm",children:"Aucun client enregistr\xe9"}):(0,l.jsx)("ul",{className:"space-y-2 text-sm text-gray-700",children:d.map(e=>(0,l.jsxs)("li",{children:["\uD83D\uDD39 ",(0,l.jsx)("strong",{children:e.nom})," — ",e.ville_recherche," (",e.budget_min,"€ \xe0 ",e.budget_max,"€)"]},e.id))})]}),(0,l.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow border border-gray-100",children:[(0,l.jsxs)("h2",{className:"text-lg font-semibold text-gray-700 mb-4",children:["\uD83C\uDFE1 Ses biens (",h.length,")"]}),0===h.length?(0,l.jsx)("p",{className:"text-gray-500 text-sm",children:"Aucun bien enregistr\xe9"}):(0,l.jsx)("ul",{className:"space-y-2 text-sm text-gray-700",children:h.map(e=>{var s;return(0,l.jsxs)("li",{children:["\uD83D\uDCCD ",(0,l.jsx)("strong",{children:e.titre})," \xe0 ",e.ville," — ",null===(s=e.prix)||void 0===s?void 0:s.toLocaleString()," €"]},e.id)})})]})]})]}):(0,l.jsx)("p",{className:"text-red-500 p-8",children:"Agent introuvable"})}}},function(e){e.O(0,[1664,9774,2888,179],function(){return e(e.s=7949)}),_N_E=e.O()}]);