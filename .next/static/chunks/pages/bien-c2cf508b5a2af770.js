(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4184],{7812:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/bien",function(){return t(7728)}])},7728:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return Biens}});var l=t(5893),n=t(7294),i=t(9846),r=t(1163);function Biens(){let[e,s]=(0,n.useState)(null),[t,a]=(0,n.useState)([]),[c,d]=(0,n.useState)(!0),u=(0,r.useRouter)();return(0,n.useEffect)(()=>{let fetchUserAndBiens=async()=>{let{data:{session:e}}=await i.O.auth.getSession();if(!e)return u.push("/login");let t=e.user.id;s(t),console.log("✅ Agent connect\xe9 :",t);let{data:l,error:n}=await i.O.from("biens").select("*");n?console.error("❌ Erreur chargement biens :",n):(console.log("\uD83D\uDCE6 Biens r\xe9cup\xe9r\xe9s :",l),a(l||[])),d(!1)};fetchUserAndBiens()},[]),(0,l.jsxs)("div",{className:"flex bg-gray-100 min-h-screen",children:[(0,l.jsxs)("aside",{className:"w-64 bg-white shadow-xl p-4 flex flex-col space-y-6 fixed h-full",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:"LOGICIEL IMMO"}),(0,l.jsxs)("nav",{className:"flex flex-col space-y-2 mt-6",children:[(0,l.jsx)("a",{href:"/dashboard",className:"hover:text-blue-600",children:"\uD83C\uDFE0 Tableau de bord"}),(0,l.jsx)("a",{href:"/clients",className:"hover:text-blue-600",children:"\uD83D\uDC65 Clients"}),(0,l.jsx)("a",{href:"/biens",className:"text-blue-600 font-semibold",children:"\uD83C\uDFE1 Biens"})]})]}),(0,l.jsxs)("main",{className:"flex-1 ml-64 p-8",children:[(0,l.jsxs)("div",{className:"mb-4 text-sm text-gray-500",children:["\uD83E\uDDE0 Mon ID : ",(0,l.jsx)("strong",{children:e})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold",children:"\uD83C\uDFE1 Tous les biens (debug)"}),(0,l.jsx)("a",{href:"/biens/ajouter",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"➕ Ajouter un bien"})]}),c?(0,l.jsx)("p",{children:"Chargement..."}):0===t.length?(0,l.jsx)("p",{className:"text-gray-500",children:"Aucun bien trouv\xe9."}):(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:t.map(s=>{var t;let n=s.agent_id===e;return(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow p-4 space-y-2 ".concat(n?"border-l-4 border-green-500":"border-l-4 border-yellow-400"),children:[(0,l.jsx)("div",{className:"font-bold text-lg",children:s.titre}),(0,l.jsxs)("div",{className:"text-sm text-gray-600",children:["\uD83D\uDCCD ",s.ville]}),(0,l.jsxs)("div",{className:"text-sm text-gray-600",children:["\uD83D\uDCCF ",s.surface_m2," m\xb2"]}),(0,l.jsxs)("div",{className:"text-sm text-gray-600",children:["\uD83D\uDCB0 ",null===(t=s.prix)||void 0===t?void 0:t.toLocaleString()," €"]}),(0,l.jsxs)("div",{className:"text-sm text-gray-600",children:["\uD83D\uDD0B DPE : ",s.dpe]}),(0,l.jsxs)("div",{className:"text-sm text-gray-600",children:["\uD83D\uDFE2 Statut : ",s.disponible?"Disponible":"Indisponible"]}),(0,l.jsxs)("div",{className:"text-xs text-gray-400 italic",children:["agent_id: ",s.agent_id]}),(0,l.jsx)("div",{className:"text-xs font-bold ".concat(n?"text-green-600":"text-yellow-600"),children:n?"✅ C'est ton bien":"⚠️ Pas \xe0 toi"})]},s.id)})})]})]})}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=7812)}),_N_E=e.O()}]);