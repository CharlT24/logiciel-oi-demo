(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4157],{7365:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/mandats/liste",function(){return n(4558)}])},4558:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ListeMandats}});var a=n(5893),s=n(7294),i=n(9846),d=n(1664),r=n.n(d);function ListeMandats(){let[e,t]=(0,s.useState)([]);return(0,s.useEffect)(()=>{let fetchMandats=async()=>{let{data:e,error:n}=await i.O.from("registres_mandats").select("id, bien_id, date_debut, date_fin").order("date_fin",{ascending:!0});if(!n&&e){let n=e.map(e=>e.bien_id),{data:a}=await i.O.from("biens").select("id, titre").in("id",n),s=e.map(e=>{let t=a.find(t=>t.id===e.bien_id);return{...e,titre:(null==t?void 0:t.titre)||"Sans titre"}});t(s)}};fetchMandats()},[]),(0,a.jsxs)("div",{className:"max-w-5xl mx-auto p-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-orange-600 mb-4",children:"\uD83D\uDCC1 Tous les mandats"}),0===e.length?(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Aucun mandat trouv\xe9."}):(0,a.jsx)("ul",{className:"space-y-3",children:e.map(e=>(0,a.jsxs)("li",{className:"flex justify-between border p-3 rounded",children:[(0,a.jsx)(r(),{href:"/biens/".concat(e.bien_id),className:"text-orange-700 font-semibold",children:e.titre}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[new Date(e.date_debut).toLocaleDateString("fr-FR")," - ",new Date(e.date_fin).toLocaleDateString("fr-FR")]})]},e.id))})]})}}},function(e){e.O(0,[1664,9774,2888,179],function(){return e(e.s=7365)}),_N_E=e.O()}]);