(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4975],{4917:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/mandats/mes-mandats",function(){return n(2321)}])},2321:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return MesMandats}});var a=n(5893),i=n(7294),s=n(9846),d=n(1664),r=n.n(d);function MesMandats(){let[e,t]=(0,i.useState)([]);return(0,i.useEffect)(()=>{let fetchMandats=async()=>{var e,n,a;let i=await s.O.auth.getSession(),d=null===(a=i.data)||void 0===a?void 0:null===(n=a.session)||void 0===n?void 0:null===(e=n.user)||void 0===e?void 0:e.id,{data:r,error:l}=await s.O.from("registres_mandats").select("id, bien_id, date_debut, date_fin").eq("agent_id",d).order("date_fin",{ascending:!0});if(!l&&r){let e=r.map(e=>e.bien_id),{data:n}=await s.O.from("biens").select("id, titre").in("id",e),a=r.map(e=>{let t=n.find(t=>t.id===e.bien_id);return{...e,titre:(null==t?void 0:t.titre)||"Sans titre"}});t(a)}};fetchMandats()},[]),(0,a.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-orange-600 mb-4",children:"\uD83D\uDCCB Mes mandats"}),0===e.length?(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Aucun mandat enregistr\xe9."}):(0,a.jsx)("ul",{className:"space-y-3",children:e.map(e=>(0,a.jsxs)("li",{className:"flex justify-between border p-3 rounded",children:[(0,a.jsx)(r(),{href:"/biens/".concat(e.bien_id),className:"text-orange-700 font-semibold",children:e.titre}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[new Date(e.date_debut).toLocaleDateString("fr-FR")," - ",new Date(e.date_fin).toLocaleDateString("fr-FR")]})]},e.id))})]})}}},function(e){e.O(0,[1664,9774,2888,179],function(){return e(e.s=4917)}),_N_E=e.O()}]);