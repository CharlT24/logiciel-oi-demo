(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[737],{9438:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/boutique",function(){return a(2289)}])},2289:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Boutique}});var s=a(5893),n=a(7294),i=a(9846);function Boutique(){let[e,t]=(0,n.useState)([]),[a,r]=(0,n.useState)([]);(0,n.useEffect)(()=>{let fetchProduits=async()=>{let{data:e,error:a}=await i.O.from("boutique").select("*").eq("actif",!0);a||t(e)};fetchProduits()},[]);let ajouterAuPanier=(e,t)=>{r(a=>[...a,{...e,quantite:t}])},handlePaiement=async()=>{let e=await fetch("/api/stripe/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({panier:a})}),t=await e.json();t.url?window.location.href=t.url:alert("❌ Erreur lors de la cr\xe9ation du paiement")};return(0,s.jsxs)("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-orange-600",children:"\uD83D\uDED2 Boutique"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:e.map(e=>(0,s.jsxs)("div",{className:"border rounded shadow p-4 space-y-2",children:[(0,s.jsx)("img",{src:e.image_url,alt:e.nom,className:"w-full h-48 object-cover rounded"}),(0,s.jsx)("h2",{className:"text-lg font-semibold",children:e.nom}),(0,s.jsxs)("p",{className:"text-gray-700",children:[e.prix," €"]}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Stock : ",e.stock]}),(0,s.jsx)("input",{type:"number",min:"1",max:e.stock,defaultValue:"1",className:"border rounded px-2 py-1 w-full",onChange:t=>e.quantiteChoisie=t.target.value}),(0,s.jsx)("button",{onClick:()=>ajouterAuPanier(e,e.quantiteChoisie||1),className:"bg-orange-500 text-white px-4 py-2 rounded w-full",children:"Ajouter au panier"})]},e.id))}),(0,s.jsxs)("div",{className:"mt-8",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"\uD83D\uDECD️ Mon panier"}),0===a.length?(0,s.jsx)("p",{className:"text-gray-500",children:"Votre panier est vide."}):(0,s.jsx)("ul",{className:"space-y-2",children:a.map((e,t)=>(0,s.jsxs)("li",{className:"border p-2 rounded flex justify-between",children:[e.nom," x ",e.quantite," — ",e.prix*e.quantite," €"]},t))}),a.length>0&&(0,s.jsx)("button",{onClick:handlePaiement,className:"mt-4 bg-green-600 text-white px-4 py-2 rounded",children:"Passer au paiement"})]})]})}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=9438)}),_N_E=e.O()}]);