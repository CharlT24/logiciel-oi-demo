(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2413],{5618:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/clients/[id]",function(){return n(6194)}])},6194:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return FicheClient}});var t=n(5893),r=n(7294),i=n(1163),l=n(9846),c=n(4053),d=n(1664),a=n.n(d);function FicheClient(){let e=(0,i.useRouter)(),{id:s}=e.query,n=(0,c.useSession)(),[d,o]=(0,r.useState)(null);(0,r.useEffect)(()=>{s&&fetchClient()},[s]);let fetchClient=async()=>{let{data:e,error:n}=await l.O.from("clients").select("*").eq("id",s).single();n?console.error("Erreur chargement client",n):o(e)},handleDelete=async()=>{let s=confirm("❗️Confirmer la suppression de ce client ?");if(!s)return;let{error:n}=await l.O.from("clients").delete().eq("id",d.id);n?(alert("Erreur lors de la suppression ❌"),console.error(n)):(alert("Client supprim\xe9 ✅"),e.push("/clients"))};return d?(0,t.jsxs)("div",{className:"max-w-4xl mx-auto bg-white p-8 rounded-xl shadow-xl space-y-6",children:[(0,t.jsxs)("h1",{className:"text-3xl font-semibold text-gray-900",children:["\uD83D\uDC64 ",d.nom]}),(0,t.jsxs)("div",{className:"space-y-4 text-gray-800",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Email :"})," ",d.email]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"T\xe9l\xe9phone :"})," ",d.telephone]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Type de bien :"})," ",d.type_bien]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Ville :"})," ",d.ville_recherche]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Budget :"})," ",d.budget_min," € → ",d.budget_max," €"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Surface minimum :"})," ",d.surface_min," m\xb2"]})]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Profil :"})," ",d.profil]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Canal d'entr\xe9e :"})," ",d.canal_entree]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Notes :"})," ",d.notes]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-6 pt-6 border-t mt-8",children:[(0,t.jsx)(a(),{href:"/clients/".concat(d.id,"/modifier"),className:"text-blue-600 hover:underline text-lg",children:"✏️ Modifier"}),((null==n?void 0:n.user.id)===d.agent_id||(null==n?void 0:n.user.user_metadata.role)==="admin")&&(0,t.jsx)("button",{onClick:handleDelete,className:"text-red-600 hover:underline text-lg",children:"\uD83D\uDDD1 Supprimer"})]})]}):(0,t.jsx)("p",{className:"text-center mt-10",children:"Chargement..."})}}},function(e){e.O(0,[1664,9774,2888,179],function(){return e(e.s=5618)}),_N_E=e.O()}]);