(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5706],{5132:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/clients/locataires/ajouter",function(){return a(6894)}])},6894:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return AjouterLocataire}});var n=a(5893),l=a(7294),i=a(1163),s=a(9846);function AjouterLocataire(){let e=(0,i.useRouter)(),[t,a]=(0,l.useState)({nom:"",prenom:"",telephone:"",email:"",justificatif_identite:"",justificatif_domicile:"",justificatif_revenus:"",contrat_travail:"",dernier_avertissement_loyer:"",autres_documents:""}),handleChange=e=>{let{name:t,value:n}=e.target;a(e=>({...e,[t]:n}))},handleUpload=async(e,t)=>{let n=e.target.files[0];if(!n)return;let l="temp/".concat(t,"-").concat(Date.now(),"-").concat(n.name),{data:i,error:o}=await s.O.storage.from("documents-locataires").upload(l,n);if(o){console.error("Erreur upload :",o);return}let r=s.O.storage.from("documents-locataires").getPublicUrl(l).data.publicUrl;a(e=>({...e,[t]:r}))},handleSubmit=async a=>{a.preventDefault();let{error:n}=await s.O.from("locataires").insert(t);n?(console.error("❌ Erreur Supabase:",n),alert("Erreur lors de l'ajout du locataire")):(alert("✅ Locataire ajout\xe9 avec succ\xe8s"),e.push("/clients/locataires"))};return(0,n.jsxs)("div",{className:"max-w-3xl mx-auto mt-10 bg-white p-8 rounded-xl shadow space-y-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-orange-600",children:"➕ Ajouter un locataire"}),(0,n.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-6",children:[(0,n.jsx)(Input,{label:"Nom",name:"nom",value:t.nom,onChange:handleChange}),(0,n.jsx)(Input,{label:"Pr\xe9nom",name:"prenom",value:t.prenom,onChange:handleChange}),(0,n.jsx)(Input,{label:"T\xe9l\xe9phone",name:"telephone",value:t.telephone,onChange:handleChange}),(0,n.jsx)(Input,{label:"Email",name:"email",value:t.email,onChange:handleChange}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Justificatif d'identit\xe9"}),(0,n.jsx)("input",{type:"file",onChange:e=>handleUpload(e,"justificatif_identite")}),(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Justificatif de domicile"}),(0,n.jsx)("input",{type:"file",onChange:e=>handleUpload(e,"justificatif_domicile")}),(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Justificatif de revenus"}),(0,n.jsx)("input",{type:"file",onChange:e=>handleUpload(e,"justificatif_revenus")}),(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Contrat de travail"}),(0,n.jsx)("input",{type:"file",onChange:e=>handleUpload(e,"contrat_travail")}),(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Dernier avertissement de loyer"}),(0,n.jsx)("input",{type:"file",onChange:e=>handleUpload(e,"dernier_avertissement_loyer")}),(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Autres documents"}),(0,n.jsx)("input",{type:"file",onChange:e=>handleUpload(e,"autres_documents")})]}),(0,n.jsx)("button",{type:"submit",className:"bg-orange-600 text-white px-6 py-3 rounded hover:bg-orange-700",children:"✅ Enregistrer"})]})]})}function Input(e){let{label:t,name:a,value:l,onChange:i}=e;return(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:t}),(0,n.jsx)("input",{type:"text",name:a,value:l,onChange:i,className:"w-full border border-gray-300 rounded px-3 py-2"})]})}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=5132)}),_N_E=e.O()}]);