(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5721],{8846:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/clients/locataires",function(){return t(4341)}])},4341:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return ListeLocataires}});var s=t(5893),a=t(7294),n=t(1664),i=t.n(n),c=t(1163),o=t(9846);function ListeLocataires(){let[e,r]=(0,a.useState)([]),t=(0,c.useRouter)(),fetchLocataires=async()=>{let{data:e,error:t}=await o.O.from("locataires").select("*").order("created_at",{ascending:!1});t?console.error("Erreur chargement locataires :",t):r(e)};(0,a.useEffect)(()=>{fetchLocataires()},[]);let supprimerLocataire=async t=>{let s=confirm("❌ Supprimer ce locataire ?");if(!s)return;let{error:a}=await o.O.from("locataires").delete().eq("id",t);a?(console.error("Erreur suppression :",a),alert("Une erreur est survenue lors de la suppression.")):r(e.filter(e=>e.id!==t))};return(0,s.jsxs)("div",{className:"max-w-5xl mx-auto mt-12 space-y-8",children:[(0,s.jsx)("button",{type:"button",onClick:()=>t.back(),className:"text-sm text-orange-600 hover:underline",children:"← Retour"}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-orange-600",children:"\uD83D\uDCC4 Dossiers des locataires"}),(0,s.jsx)(i(),{href:"/clients/locataires/ajouter",className:"bg-orange-600 text-white px-4 py-2 rounded shadow hover:bg-orange-700",children:"➕ Ajouter un locataire"})]}),0===e.length?(0,s.jsx)("p",{className:"text-gray-600",children:"Aucun locataire enregistr\xe9."}):(0,s.jsx)("div",{className:"grid gap-4",children:e.map(e=>(0,s.jsxs)("div",{className:"flex justify-between items-center bg-white border rounded-lg shadow p-4 hover:bg-orange-50 transition",children:[(0,s.jsxs)(i(),{href:"/clients/locataires/".concat(e.id),className:"flex-1",children:[(0,s.jsxs)("h2",{className:"font-bold text-lg",children:[e.prenom," ",e.nom]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["\uD83D\uDCE7 ",e.email," — \uD83D\uDCDE ",e.telephone]})]}),(0,s.jsx)("button",{onClick:()=>supprimerLocataire(e.id),className:"ml-4 text-sm text-red-600 hover:underline",children:"\uD83D\uDDD1️ Supprimer"})]},e.id))})]})}}},function(e){e.O(0,[1664,9774,2888,179],function(){return e(e.s=8846)}),_N_E=e.O()}]);