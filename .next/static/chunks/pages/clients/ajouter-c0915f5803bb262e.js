(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3549],{83:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/clients/ajouter",function(){return a(3410)}])},3410:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return AjouterClient}});var l=a(5893),r=a(7294),t=a(1163),s=a(9846);function AjouterClient(){let e=(0,t.useRouter)(),[n,a]=(0,r.useState)({}),[i,u]=(0,r.useState)(!1),handleChange=e=>{let{name:n,value:l}=e.target;a(e=>({...e,[n]:l}))},handleSubmit=async a=>{a.preventDefault(),u(!0);let{nom:l,email:r,telephone:t,budget_min:i,budget_max:c,surface_min:o}=n;if(!l||!r||!t||!i||!c||!o){alert("Tous les champs marqu\xe9s * sont requis."),u(!1);return}let{error:d}=await s.O.from("clients").insert([{nom:l,email:r,telephone:t,type_bien:n.type_bien||null,ville_recherche:n.ville_recherche||null,budget_min:parseInt(i),budget_max:parseInt(c),surface_min:parseInt(o),profil:n.profil||null,canal_entree:n.canal_entree||null,notes:n.notes||null}]);if(d){console.error("Erreur insertion :",d),alert("Erreur lors de l'ajout du client ❌"),u(!1);return}let{error:h}=await s.O.rpc("recalcul_rapprochements");h&&console.warn("Client cr\xe9\xe9 mais recalcul non effectu\xe9 :",h),alert("Client ajout\xe9 ✅"),e.push("/clients")};return(0,l.jsxs)("div",{className:"max-w-4xl mx-auto bg-white p-6 rounded-xl shadow space-y-8",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-orange-600",children:"➕ Ajouter un client"}),(0,l.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-gray-700 mb-2",children:"\uD83D\uDCC7 Identit\xe9"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsx)("input",{name:"nom",value:n.nom||"",onChange:handleChange,className:"input",placeholder:"Nom complet *",required:!0}),(0,l.jsx)("input",{name:"email",value:n.email||"",onChange:handleChange,className:"input",placeholder:"Email *",required:!0}),(0,l.jsx)("input",{name:"telephone",value:n.telephone||"",onChange:handleChange,className:"input",placeholder:"T\xe9l\xe9phone *",required:!0})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-gray-700 mb-2",children:"\uD83C\uDFE1 Recherche"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsx)("input",{name:"type_bien",value:n.type_bien||"",onChange:handleChange,className:"input",placeholder:"Type de bien recherch\xe9"}),(0,l.jsx)("input",{name:"ville_recherche",value:n.ville_recherche||"",onChange:handleChange,className:"input",placeholder:"Ville recherch\xe9e"}),(0,l.jsx)("input",{type:"number",name:"budget_min",value:n.budget_min||"",onChange:handleChange,className:"input",placeholder:"Budget minimum (€)",required:!0}),(0,l.jsx)("input",{type:"number",name:"budget_max",value:n.budget_max||"",onChange:handleChange,className:"input",placeholder:"Budget maximum (€)",required:!0}),(0,l.jsx)("input",{type:"number",name:"surface_min",value:n.surface_min||"",onChange:handleChange,className:"input",placeholder:"Surface minimale (m\xb2)",required:!0})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-gray-700 mb-2",children:"\uD83E\uDDE0 Infos compl\xe9mentaires"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsx)("input",{name:"profil",value:n.profil||"",onChange:handleChange,className:"input",placeholder:"Profil (investisseur, primo-acc\xe9dant, etc.)"}),(0,l.jsx)("input",{name:"canal_entree",value:n.canal_entree||"",onChange:handleChange,className:"input",placeholder:"Canal d'entr\xe9e (site, t\xe9l\xe9phone, agence...)"})]}),(0,l.jsx)("textarea",{name:"notes",value:n.notes||"",onChange:handleChange,className:"w-full border rounded-lg px-4 py-2 mt-4",rows:4,placeholder:"Notes, remarques..."})]}),(0,l.jsx)("div",{className:"text-right",children:(0,l.jsx)("button",{type:"submit",disabled:i,className:"bg-orange-600 text-white px-6 py-2 rounded hover:bg-orange-700",children:i?"Enregistrement...":"\uD83D\uDCBE Enregistrer"})})]})]})}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=83)}),_N_E=e.O()}]);