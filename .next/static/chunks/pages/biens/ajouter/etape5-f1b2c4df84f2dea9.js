(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7964],{1925:function(e,r,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/biens/ajouter/etape5",function(){return a(7865)}])},7865:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return Etape5}});var n=a(5893),t=a(7294),i=a(1163),l=a(9846);function Etape5(){let e=(0,i.useRouter)(),[r,a]=(0,t.useState)([{nom:"",prenom:"",telephone:"",email:"",adresse_principale:""}]),[s,o]=(0,t.useState)(""),[p,u]=(0,t.useState)(!1),handleChangeProprietaire=(e,n,t)=>{let i=[...r];i[e][n]=t,a(i)},finaliserProprietaires=async()=>{let a=e.query.id;if(!a){alert("Bien introuvable");return}try{for(let e of(u(!0),r)){let{error:r}=await l.O.from("proprietaires").insert({bien_id:a,nom:e.nom,prenom:e.prenom,telephone:e.telephone,email:e.email,adresse_principale:e.adresse_principale||null});if(r)throw r}alert("✅ Propri\xe9taire(s) enregistr\xe9(s) avec succ\xe8s!"),s.trim()?(alert("✅ Num\xe9ro de mandat saisi: "+s),e.push("/biens")):e.push("/ajouter/etape6?id=".concat(a))}catch(e){console.error("Erreur cr\xe9ation propri\xe9taires:",e),alert("Erreur lors de l'enregistrement des propri\xe9taires")}finally{u(!1)}};return(0,n.jsxs)("div",{className:"max-w-5xl mx-auto p-6 space-y-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-orange-600",children:"\uD83D\uDC64 \xc9tape 5: Cr\xe9ation des Propri\xe9taires"}),(0,n.jsxs)("div",{className:"border rounded-lg p-4 space-y-6",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold text-orange-500",children:"Propri\xe9taire(s)"}),r.map((e,r)=>(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsx)(Input,{label:"Nom",value:e.nom,onChange:e=>handleChangeProprietaire(r,"nom",e)}),(0,n.jsx)(Input,{label:"Pr\xe9nom",value:e.prenom,onChange:e=>handleChangeProprietaire(r,"prenom",e)}),(0,n.jsx)(Input,{label:"T\xe9l\xe9phone",value:e.telephone,onChange:e=>handleChangeProprietaire(r,"telephone",e)}),(0,n.jsx)(Input,{label:"Email",value:e.email,onChange:e=>handleChangeProprietaire(r,"email",e)}),(0,n.jsx)(Input,{label:"Adresse principale (facultatif)",value:e.adresse_principale,onChange:e=>handleChangeProprietaire(r,"adresse_principale",e)})]},r)),(0,n.jsx)("button",{onClick:()=>{a([...r,{nom:"",prenom:"",telephone:"",email:"",adresse_principale:""}])},className:"mt-4 bg-gray-200 px-4 py-2 rounded",children:"➕ Ajouter un propri\xe9taire"})]}),(0,n.jsxs)("div",{className:"border rounded-lg p-4 space-y-4",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold text-orange-500",children:"Num\xe9ro de Mandat (facultatif)"}),(0,n.jsx)(Input,{label:"Num\xe9ro de mandat (laisser vide pour g\xe9n\xe9rer automatiquement)",value:s,onChange:e=>o(e)})]}),(0,n.jsx)("div",{className:"flex justify-end space-x-4",children:(0,n.jsx)("button",{onClick:finaliserProprietaires,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-semibold",disabled:p,children:"✅ Valider et continuer"})})]})}function Input(e){let{label:r,value:a,onChange:t,type:i="text"}=e;return(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r}),(0,n.jsx)("input",{type:i,value:a,onChange:e=>t(e.target.value),className:"w-full border rounded px-3 py-2 shadow-sm focus:ring-orange-500 focus:border-orange-500"})]})}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=1925)}),_N_E=e.O()}]);