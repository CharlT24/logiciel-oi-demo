(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6978],{3942:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ancier-rapprochements",function(){return s(3071)}])},3071:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Rapprochements}});var a=s(5893),l=s(7294),r=s(9846);function Rapprochements(){let[e,t]=(0,l.useState)([]),[s,n]=(0,l.useState)([]);(0,l.useEffect)(()=>{let fetchData=async()=>{let{data:e}=await r.O.from("clients").select("*"),{data:s}=await r.O.from("biens").select("*").eq("disponible",!0);t(e||[]),n(s||[])};fetchData()},[]);let filtrerBiensCompatibles=e=>s.filter(t=>{var s,a;return(null===(s=t.ville)||void 0===s?void 0:s.toLowerCase().trim())===(null===(a=e.ville)||void 0===a?void 0:a.toLowerCase().trim())&&t.prix<=e.budget_max});return(0,a.jsxs)("div",{className:"ml-64 p-8 bg-gray-50 min-h-screen",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"\uD83D\uDD0D Rapprochements Clients ↔ Biens"}),e.map(e=>{let t=filtrerBiensCompatibles(e);return(0,a.jsxs)("div",{className:"bg-white shadow rounded-xl p-4 mb-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-orange-600 mb-2",children:["\uD83D\uDC64 ",e.nom," — ",e.ville," — Budget max : ",e.budget_max.toLocaleString()," €"]}),0===t.length?(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"❌ Aucun bien correspondant"}):(0,a.jsx)("ul",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:t.map(e=>(0,a.jsxs)("li",{className:"border p-3 rounded-lg bg-gray-50",children:[(0,a.jsx)("p",{className:"font-semibold",children:e.titre}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["\uD83D\uDCCD ",e.ville]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["\uD83D\uDCB0 ",e.prix.toLocaleString()," € — ",e.surface_m2," m\xb2"]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["\uD83D\uDD0B DPE : ",e.dpe]}),(0,a.jsxs)("p",{className:"text-xs text-gray-400 mt-2",children:["Agent ID : ",e.agent_id]})]},e.id))})]},e.id)})]})}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=3942)}),_N_E=e.O()}]);