(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8006],{1173:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reset-password",function(){return s(9378)}])},9378:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return ResetPassword}});var n=s(5893),a=s(7294),r=s(1163),o=s(9846);function ResetPassword(){let e=(0,r.useRouter)(),[t,s]=(0,a.useState)(""),[i,l]=(0,a.useState)(""),[u,d]=(0,a.useState)("request"),[c,h]=(0,a.useState)(!1),[x,m]=(0,a.useState)("");(0,a.useEffect)(()=>{let e=window.location.hash;e.includes("access_token")&&d("reset")},[]);let handleRequest=async()=>{h(!0);let e="".concat(window.location.origin,"/reset-password"),{error:s}=await o.O.auth.resetPasswordForEmail(t,{redirectTo:e});m(s?"❌ ".concat(s.message):"✅ Lien envoy\xe9 \xe0 votre email."),h(!1)},handleReset=async()=>{h(!0);let{error:t}=await o.O.auth.updateUser({password:i});t?m("❌ "+t.message):(m("✅ Mot de passe mis \xe0 jour. Redirection..."),setTimeout(()=>e.push("/login"),2e3)),h(!1)};return(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,n.jsxs)("form",{className:"bg-white p-8 rounded-xl shadow-md w-full max-w-md space-y-5",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-center text-orange-600",children:"\uD83D\uDD10 R\xe9initialisation du mot de passe"}),x&&(0,n.jsx)("p",{className:"text-sm text-center text-gray-700",children:x}),"request"===u?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{type:"email",placeholder:"Votre adresse email",value:t,onChange:e=>s(e.target.value),className:"w-full border p-3 rounded",required:!0}),(0,n.jsx)("button",{type:"button",onClick:handleRequest,disabled:c,className:"w-full bg-orange-500 hover:bg-orange-600 text-white font-semibold py-2 rounded transition",children:c?"Envoi en cours...":"\uD83D\uDCE9 Envoyer le lien"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{type:"password",placeholder:"Nouveau mot de passe",value:i,onChange:e=>l(e.target.value),className:"w-full border p-3 rounded",required:!0}),(0,n.jsx)("button",{type:"button",onClick:handleReset,disabled:c||!i,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-2 rounded transition",children:c?"Mise \xe0 jour...":"✅ R\xe9initialiser"})]}),(0,n.jsx)("p",{className:"text-sm text-center text-gray-600",children:(0,n.jsx)("a",{href:"/login",className:"text-orange-600 hover:underline",children:"← Retour \xe0 la connexion"})})]})})}ResetPassword.getLayout=function(e){return(0,n.jsx)(n.Fragment,{children:e})}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=1173)}),_N_E=e.O()}]);