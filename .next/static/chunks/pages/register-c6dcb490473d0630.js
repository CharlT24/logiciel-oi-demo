(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[495],{5511:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/register",function(){return r(7200)}])},7200:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Register}});var a=r(5893),n=r(7294),s=r(1163),l=r(9846);function Register(){let e=(0,s.useRouter)(),[t,r]=(0,n.useState)({email:"",password:"",nom:"",telephone:""}),[o,u]=(0,n.useState)(!1),handleChange=e=>{let{name:t,value:a}=e.target;r(e=>({...e,[t]:a}))},handleRegister=async r=>{r.preventDefault(),u(!0);let{email:a,password:n,nom:s,telephone:o}=t;if(!a||!n||!s||!o){alert("Tous les champs sont requis"),u(!1);return}let{data:i,error:p}=await l.O.auth.signUp({email:a,password:n});if(p){console.error("❌ Erreur cr\xe9ation compte :",p),alert("Erreur \xe0 la cr\xe9ation du compte : "+p.message),u(!1);return}await new Promise(e=>setTimeout(e,1e3));let{error:c}=await l.O.rpc("insert_utilisateur",{p_email:a,p_nom:s,p_telephone:o,p_role:"agent"});if(c){console.error("❌ Erreur RPC :",c),alert("Erreur lors de l'enregistrement dans la base."),u(!1);return}alert("✅ Compte cr\xe9\xe9 avec succ\xe8s !"),e.push("/login")};return(0,a.jsxs)("div",{className:"max-w-md mx-auto mt-12 bg-white p-8 shadow-lg rounded-xl space-y-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-orange-600 text-center",children:"\uD83D\uDCDD Cr\xe9er un compte"}),(0,a.jsxs)("form",{onSubmit:handleRegister,className:"space-y-4",children:[(0,a.jsx)("input",{type:"text",name:"nom",placeholder:"Nom complet",value:t.nom,onChange:handleChange,className:"input",required:!0}),(0,a.jsx)("input",{type:"tel",name:"telephone",placeholder:"T\xe9l\xe9phone",value:t.telephone,onChange:handleChange,className:"input",required:!0}),(0,a.jsx)("input",{type:"email",name:"email",placeholder:"Email",value:t.email,onChange:handleChange,className:"input",required:!0}),(0,a.jsx)("input",{type:"password",name:"password",placeholder:"Mot de passe",value:t.password,onChange:handleChange,className:"input",required:!0}),(0,a.jsx)("button",{type:"submit",disabled:o,className:"w-full bg-orange-600 text-white py-2 rounded hover:bg-orange-700 transition",children:o?"Cr\xe9ation...":"Cr\xe9er mon compte"})]})]})}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=5511)}),_N_E=e.O()}]);