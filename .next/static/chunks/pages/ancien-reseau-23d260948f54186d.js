(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3043],{8021:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ancien-reseau",function(){return t(4344)}])},4344:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return Reseau}});var i=t(5893),l=t(7294),n=t(9846);function Reseau(){let[e,s]=(0,l.useState)([]),[t,a]=(0,l.useState)(null),[r,c]=(0,l.useState)([]),[d,u]=(0,l.useState)([]);(0,l.useEffect)(()=>{fetchUtilisateurs()},[]);let fetchUtilisateurs=async()=>{let{data:e,error:t}=await n.O.from("utilisateurs").select("*");t?console.error("Erreur utilisateurs :",t):s(e)},voirDetails=async e=>{a(e);let{data:s}=await n.O.from("biens").select("*").eq("agent_id",e),{data:t}=await n.O.from("clients").select("*").eq("agent_id",e);c(s||[]),u(t||[])};return(0,i.jsxs)("div",{className:"ml-64 p-8 bg-gray-50 min-h-screen",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"\uD83D\uDC65 Voir le r\xe9seau"}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(e=>(0,i.jsxs)("div",{className:"bg-white rounded-xl shadow p-4",children:[(0,i.jsx)("p",{className:"font-semibold text-lg",children:e.nom||"Utilisateur"}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:e.email}),(0,i.jsxs)("p",{className:"text-sm text-gray-500 mb-2",children:["\uD83D\uDCCD ",e.ville||"Ville inconnue"]}),(0,i.jsx)("button",{className:"text-orange-600 text-sm hover:underline",onClick:()=>voirDetails(e.id),children:"➕ Voir ses biens & clients"})]},e.id))}),t&&(0,i.jsxs)("div",{className:"mt-10 bg-white rounded-xl shadow p-6",children:[(0,i.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\uD83D\uDCE6 Biens et clients de l’agent s\xe9lectionn\xe9"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-semibold text-orange-500 mb-2",children:"\uD83C\uDFE1 Biens"}),0===r.length?(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Aucun bien enregistr\xe9."}):(0,i.jsx)("ul",{className:"text-sm space-y-1",children:r.map(e=>{var s;return(0,i.jsxs)("li",{children:["• ",e.titre," – ",e.ville," – ",null===(s=e.prix)||void 0===s?void 0:s.toLocaleString()," €"]},e.id)})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-semibold text-orange-500 mb-2",children:"\uD83D\uDC64 Clients"}),0===d.length?(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Aucun client enregistr\xe9."}):(0,i.jsx)("ul",{className:"text-sm space-y-1",children:d.map(e=>{var s;return(0,i.jsxs)("li",{children:["• ",e.nom," – ",e.ville," – ",null===(s=e.budget_max)||void 0===s?void 0:s.toLocaleString()," €"]},e.id)})})]})]})]})]})}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=8021)}),_N_E=e.O()}]);