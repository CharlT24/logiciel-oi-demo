(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4589],{3438:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/espace",function(){return t(4999)}])},312:function(e,s,t){"use strict";t.d(s,{Z:function(){return AdminNavbar}});var n=t(5893),l=t(1664),i=t.n(l);function AdminNavbar(){return(0,n.jsxs)("nav",{className:"bg-white shadow mb-6 px-4 py-3 flex justify-center space-x-4",children:[(0,n.jsx)(i(),{href:"/espace",className:"text-blue-600 hover:underline",children:"\uD83C\uDFE1 Espace"}),(0,n.jsx)(i(),{href:"/clients",className:"text-blue-600 hover:underline",children:"\uD83D\uDC65 Ajouter client"}),(0,n.jsx)(i(),{href:"/biens",className:"text-blue-600 hover:underline",children:"\uD83C\uDFE0 Ajouter bien"}),(0,n.jsx)(i(),{href:"/admin/utilisateurs",className:"text-blue-600 hover:underline",children:"\uD83D\uDEE0 Utilisateurs"})]})}},4999:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return Espace}});var n=t(5893),l=t(7294),i=t(9846),a=t(312);function Espace(){let[e,s]=(0,l.useState)([]),[t,c]=(0,l.useState)([]),[r,u]=(0,l.useState)(!0),[d,x]=(0,l.useState)(!1),[o,h]=(0,l.useState)(null);return(0,l.useEffect)(()=>{let fetchData=async()=>{let{data:{session:e},error:t}=await i.O.auth.getSession();if(t||!e){console.warn("⚠️ Pas de session active");return}let n=e.user.id;h(n),console.log("\uD83D\uDCCC Agent connect\xe9 :",n);let l=i.O.from("biens").select("*"),a=i.O.from("clients").select("*");r||(l=l.eq("agent_id",n)),d||(a=a.eq("agent_id",n));let{data:u,error:x}=await l,{data:o,error:m}=await a;x&&console.error("❌ Erreur biens :",x),m&&console.error("❌ Erreur clients :",m),console.log("\uD83D\uDCE6 Biens r\xe9cup\xe9r\xe9s :",u),s(u||[]),c(o||[])};fetchData()},[r,d]),(0,n.jsxs)("div",{className:"p-6 bg-gray-100 min-h-screen text-gray-800",children:[(0,n.jsx)(a.Z,{}),(0,n.jsx)("h1",{className:"text-3xl font-semibold mb-6 text-center",children:"\uD83C\uDFE1 Espace Agent (Debug)"}),(0,n.jsxs)("div",{className:"mb-10",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,n.jsx)("h2",{className:"text-xl font-bold",children:"\uD83D\uDCE6 Biens"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("button",{onClick:()=>u(!1),className:"px-3 py-1 rounded ".concat(r?"bg-gray-200":"bg-blue-600 text-white"),children:"Mes biens"}),(0,n.jsx)("button",{onClick:()=>u(!0),className:"ml-2 px-3 py-1 rounded ".concat(r?"bg-blue-600 text-white":"bg-gray-200"),children:"Tous les biens"})]})]}),0===e.length?(0,n.jsx)("p",{className:"text-gray-500",children:"Aucun bien \xe0 afficher."}):(0,n.jsx)("ul",{className:"space-y-3",children:e.map(e=>(0,n.jsxs)("li",{className:"bg-white p-4 rounded shadow border",children:[(0,n.jsx)("div",{className:"font-bold text-lg",children:e.titre}),(0,n.jsxs)("div",{className:"text-sm",children:["\uD83C\uDFE0 Ville : ",e.ville]}),(0,n.jsxs)("div",{className:"text-sm",children:["\uD83D\uDCCF Surface : ",e.surface_m2," m\xb2"]}),(0,n.jsxs)("div",{className:"text-sm",children:["\uD83D\uDCB6 Prix : ",e.prix," €"]}),(0,n.jsxs)("div",{className:"text-sm",children:["\uD83D\uDD0B DPE : ",e.dpe]}),(0,n.jsxs)("div",{className:"text-sm",children:["\uD83D\uDD11 Agent ID : ",e.agent_id]}),(0,n.jsxs)("div",{className:"text-sm",children:["✅ Disponible : ",String(e.disponible)]}),(0,n.jsxs)("div",{className:"text-xs text-gray-400",children:["\uD83D\uDCC5 Cr\xe9\xe9 le : ",e.created_at]})]},e.id))})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,n.jsx)("h2",{className:"text-xl font-bold",children:"\uD83D\uDC65 Clients"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("button",{onClick:()=>x(!1),className:"px-3 py-1 rounded ".concat(d?"bg-gray-200":"bg-blue-600 text-white"),children:"Mes clients"}),(0,n.jsx)("button",{onClick:()=>x(!0),className:"ml-2 px-3 py-1 rounded ".concat(d?"bg-blue-600 text-white":"bg-gray-200"),children:"Tous les clients"})]})]}),(0,n.jsx)("ul",{className:"space-y-3",children:t.map(e=>(0,n.jsxs)("li",{className:"bg-white p-4 rounded shadow border",children:[(0,n.jsx)("div",{className:"font-semibold",children:e.nom}),(0,n.jsxs)("div",{className:"text-sm",children:["\uD83D\uDCCD Ville : ",e.ville_recherche]}),(0,n.jsxs)("div",{className:"text-sm",children:["\uD83D\uDCB6 Budget : ",e.budget_min," € - ",e.budget_max," €"]}),(0,n.jsxs)("div",{className:"text-sm",children:["\uD83D\uDD11 Agent ID : ",e.agent_id]})]},e.id))})]})]})}}},function(e){e.O(0,[1664,9774,2888,179],function(){return e(e.s=3438)}),_N_E=e.O()}]);